webpackJsonp([13],{"+IPJ":function(t,e){},"2lFD":function(t,e){},"ERQ/":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={};n.d(a,"cartData",function(){return _}),n.d(a,"totalCount",function(){return D}),n.d(a,"selectedArr",function(){return x}),n.d(a,"tolalPrice",function(){return S}),n.d(a,"userInfo",function(){return I});var i,o=n("7+uW"),s=n("Dd8w"),r=n.n(s),u={name:"loading",model:{prop:"show",event:"change"},props:{show:Boolean,text:String,position:String,transition:{type:String,default:"vux-mask"}},watch:{show:function(t){this.$emit("update:show",t)}}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:this.transition}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"show"}],staticClass:"weui-loading_toast vux-loading"},[e("div",{staticClass:"weui-mask_transparent"}),this._v(" "),e("div",{staticClass:"weui-toast",style:{position:this.position}},[e("i",{staticClass:"weui-loading weui-icon_toast"}),this._v(" "),e("p",{staticClass:"weui-toast__content"},[this._v(this._s(this.text||"加载中")),this._t("default")],2)])])])},staticRenderFns:[]},l=n("VU/8")(u,c,!1,function(t){n("2lFD")},null,null).exports,h=n("63CM"),d=n.n(h),m=n("NYxO"),f={name:"app",directives:{TransferDom:d.a},computed:r()({},Object(m.d)({isLoading:function(t){return t.isLoading}})),components:{Loading:l,TransferDom:d.a}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[n("loading",{model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}})],1),t._v(" "),n("keep-alive",[n("router-view")],1)],1)},staticRenderFns:[]},v=n("VU/8")(f,p,!1,function(t){n("gcY5")},null,null).exports,w=n("/ocq"),g=n("mUbh"),_=function(t){return t.cartData},D=function(t,e){var n=0;return e.cartData.forEach(function(t){n+=t.count}),n},x=function(t,e){var n=[];return e.cartData.forEach(function(t){t.isChecked&&n.push(t)}),n},S=function(t,e){var n=0;return e.cartData.forEach(function(t){t.isChecked&&(n+=100*t.price*t.count*100)}),n/=1e4},I=function(t){return t.userInfo},y=n("bOdI"),T=n.n(y),C=n("mvHQ"),b=n.n(C),E=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],k=(i={},T()(i,"UPDATE_USERINFO",function(t,e){var n=e.userInfo;t.userInfo=n}),T()(i,"UPDATE_TITLE",function(t,e){t.title=e}),T()(i,"UPDATE_LOADING",function(t,e){t.isLoading=e}),T()(i,"UPDATE_DIRECTION",function(t,e){t.direction=e}),T()(i,"ADD_TO_CART",function(t,e){var n=e.id,a=e.count,i=t.cartData.find(function(t){return t.id===n});i?(i.count+=a,localStorage.setItem("cartData",b()(t.cartData))):(t.cartData.push(e),localStorage.setItem("cartData",b()(t.cartData)))}),T()(i,"TOGGLE_STATUS",function(t,e){var n=e.index;t.cartData[n].isChecked=!t.cartData[n].isChecked,localStorage.setItem("cartData",b()(t.cartData))}),T()(i,"DELETE_PRODUCT",function(t,e){var n=e.index;t.cartData.splice(n,1),localStorage.setItem("cartData",b()(t.cartData))}),T()(i,"ADD_PRODUCT",function(t,e){var n=e.index;t.cartData[n].count++,localStorage.setItem("cartData",b()(t.cartData))}),T()(i,"CUT_PRODUCT",function(t,e){var n=e.index;t.cartData[n].count--,localStorage.setItem("cartData",b()(t.cartData))}),T()(i,"TOGGLE_ALLCHEK",function(t,e){for(var n=e.flag,a=t.cartData,i=t.cartData.length,o=0;o<i;o++)a[o].isChecked=!n;localStorage.setItem("cartData",b()(t.cartData))}),T()(i,"UPDATE_ADDRESS",function(t,e){t.userInfo.addressInfo=e,localStorage.setItem("userInfo",b()(t.userInfo))}),T()(i,"PLACE_ORDER",function(t,e){console.log(e);var n=function(t){for(var e="",n=0;n<t;n++){var a=Math.ceil(35*Math.random());e+=E[a]}return e}(12),a=(new Date).getTime(),i=e.productItem.length>1?e.productItem[0].name+"等":e.productItem[0].name,o=e.productItem[0].main_img_url,s=e.account,r=0;e.productItem.forEach(function(t){r+=t.count});var u={order_no:n,created_time:a,snap_name:i,snap_img:o,total_price:s,total_count:r,status:1};t.userInfo.orderInfo.push(u);var c=[];e.productItem.forEach(function(t){c.push(t.id)}),c.forEach(function(e){t.cartData.forEach(function(t,n,a){t.id===e&&a.splice(n,1)})}),localStorage.setItem("cartData",b()(t.cartData))}),i),O={userInfo:localStorage.userInfo?JSON.parse(localStorage.userInfo):null,cartData:localStorage.cartData?JSON.parse(localStorage.cartData):[],title:"零食商贩",isLoading:!1,direction:"forward"};n("sax8");o.a.use(m.a);var A=new m.a.Store({actions:g,getters:a,state:O,mutations:k,strict:!1,plugins:[]}),P=function(t){return Promise.all([n.e(0),n.e(5)]).then(function(){return t(n("nU8l"))}.bind(null,n)).catch(n.oe)};o.a.use(w.a);var U=[{path:"/",redirect:"/page"},{path:"/page",component:function(t){return Promise.all([n.e(0),n.e(4)]).then(function(){return t(n("riqu"))}.bind(null,n)).catch(n.oe)},children:[{path:"",redirect:"/page/home"},{path:"home",name:"home",meta:{title:"零食商贩"},component:P},{path:"theme",name:"theme",meta:{title:"主题"},component:function(t){return n.e(8).then(function(){return t(n("etFy"))}.bind(null,n)).catch(n.oe)}},{path:"category",name:"category",meta:{title:"分类"},component:function(t){return n.e(11).then(function(){return t(n("6Y3L"))}.bind(null,n)).catch(n.oe)}},{path:"detail",name:"detail",meta:{title:"商品详情"},component:function(t){return Promise.all([n.e(0),n.e(2)]).then(function(){return t(n("OtD6"))}.bind(null,n)).catch(n.oe)}},{path:"cart",name:"cart",meta:{title:"购物车",requireAuth:!0},component:function(t){return n.e(6).then(function(){return t(n("AOoF"))}.bind(null,n)).catch(n.oe)}},{path:"order",name:"order",meta:{title:"订单",requireAuth:!0},component:function(t){return n.e(7).then(function(){return t(n("1SgU"))}.bind(null,n)).catch(n.oe)}},{path:"address",name:"address",meta:{title:"地址",requireAuth:!0},component:function(t){return Promise.all([n.e(0),n.e(1)]).then(function(){return t(n("Uhrc"))}.bind(null,n)).catch(n.oe)}},{path:"user",name:"user",meta:{title:"我的",requireAuth:!0},component:function(t){return n.e(9).then(function(){return t(n("2AnY"))}.bind(null,n)).catch(n.oe)}},{path:"about",name:"about",meta:{title:"关于"},component:function(t){return n.e(10).then(function(){return t(n("Tl0t"))}.bind(null,n)).catch(n.oe)}}]},{path:"/login",name:"login",component:function(t){return Promise.all([n.e(0),n.e(3)]).then(function(){return t(n("QlWu"))}.bind(null,n)).catch(n.oe)},meta:{title:"登录"}},{path:"*",component:P}],L=new w.a({routes:U});L.beforeEach(function(t,e,n){document.title=t.meta.title,A.commit("UPDATE_TITLE",t.meta.title),A.commit("UPDATE_LOADING",!0),t.matched.some(function(t){return t.meta.requireAuth})?localStorage.token?n():n({path:"/login",query:{redirect:t.fullPath}}):n()}),L.afterEach(function(t){setTimeout(function(){A.commit("UPDATE_LOADING",!1)},300)});var N=L,$=n("//Fk"),R=n.n($),B=n("mtWM"),V=n.n(B),F=n("mw3O"),M=n.n(F),q=V.a.create({baseURL:"/api",timeout:1e4,withCredentials:!0,headers:{"X-Requested-With":"XMLHttpRequest"}});q.interceptors.request.use(function(t){return"post"===t.method&&(t.data=M.a.stringify(t.data)),localStorage.token&&(t.headers.Authorization=localStorage.token),t},function(t){return R.a.reject(t)}),q.interceptors.response.use(function(t){return t},function(t){return R.a.reject(t)});var G={install:function(t,e){Object.defineProperty(t.prototype,"$http",{value:q})}},H=n("Peep"),X=n("3BeM");o.a.use(H.a),o.a.use(X.a),o.a.use(G),o.a.config.productionTip=!1;n("v5o6").attach(document.body),new o.a({el:"#app",router:N,store:A,template:"<App/>",components:{App:v}})},gcY5:function(t,e){},mUbh:function(t,e){},mzja:function(t,e,n){"use strict";var a={mixins:[n("JkZY").a],name:"x-dialog",model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!1},maskTransition:{type:String,default:"vux-mask"},maskZIndex:[String,Number],dialogTransition:{type:String,default:"vux-dialog"},dialogClass:{type:String,default:"weui-dialog"},hideOnBlur:Boolean,dialogStyle:Object,scroll:{type:Boolean,default:!0,validator:function(t){return!0}}},computed:{maskStyle:function(){if(void 0!==this.maskZIndex)return{zIndex:this.maskZIndex}}},mounted:function(){"undefined"!=typeof window&&window.VUX_CONFIG&&"VIEW_BOX"===window.VUX_CONFIG.$layout&&(this.layout="VIEW_BOX")},watch:{show:function(t){this.$emit("update:show",t),this.$emit(t?"on-show":"on-hide"),t?this.addModalClassName():this.removeModalClassName()}},methods:{shouldPreventScroll:function(){var t=/iPad|iPhone|iPod/i.test(window.navigator.userAgent),e=this.$el.querySelector("input")||this.$el.querySelector("textarea");if(t&&e)return!0},hide:function(){this.hideOnBlur&&(this.$emit("update:show",!1),this.$emit("change",!1),this.$emit("on-click-mask"))}},data:function(){return{layout:""}}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vux-x-dialog",class:{"vux-x-dialog-absolute":"VIEW_BOX"===this.layout}},[e("transition",{attrs:{name:this.maskTransition}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"show"}],staticClass:"weui-mask",style:this.maskStyle,on:{click:this.hide}})]),this._v(" "),e("transition",{attrs:{name:this.dialogTransition}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"show"}],class:this.dialogClass,style:this.dialogStyle},[this._t("default")],2)])],1)},staticRenderFns:[]},o={name:"alert",components:{XDialog:n("VU/8")(a,i,!1,function(t){n("oIBF")},null,null).exports},created:function(){void 0!==this.value&&(this.showValue=this.value)},props:{value:Boolean,title:String,content:String,buttonText:String,hideOnBlur:{type:Boolean,default:!1},maskTransition:{type:String,default:"vux-mask"},dialogTransition:{type:String,default:"vux-dialog"},maskZIndex:[Number,String]},data:function(){return{showValue:!1}},methods:{_onHide:function(){this.showValue=!1}},watch:{value:function(t){this.showValue=t},showValue:function(t){this.$emit("input",t)}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vux-alert"},[n("x-dialog",{attrs:{"mask-transition":t.maskTransition,"dialog-transition":t.dialogTransition,"hide-on-blur":t.hideOnBlur,"mask-z-index":t.maskZIndex},on:{"on-hide":function(e){t.$emit("on-hide")},"on-show":function(e){t.$emit("on-show")}},model:{value:t.showValue,callback:function(e){t.showValue=e},expression:"showValue"}},[n("div",{staticClass:"weui-dialog__hd"},[n("strong",{staticClass:"weui-dialog__title"},[t._v(t._s(t.title))])]),t._v(" "),n("div",{staticClass:"weui-dialog__bd"},[t._t("default",[n("div",{domProps:{innerHTML:t._s(t.content)}})])],2),t._v(" "),n("div",{staticClass:"weui-dialog__ft"},[n("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:t._onHide}},[t._v(t._s(t.buttonText||"确定"))])])])],1)},staticRenderFns:[]},r=n("VU/8")(o,s,!1,function(t){n("+IPJ")},null,null);e.a=r.exports},oIBF:function(t,e){},rLAy:function(t,e,n){"use strict";var a={name:"toast",mixins:[n("xNvf").a],props:{value:Boolean,time:{type:Number,default:2e3},type:{type:String,default:"success"},transition:String,width:{type:String,default:"7.6em"},isShowMask:{type:Boolean,default:!1},text:String,position:String},data:function(){return{show:!1}},created:function(){this.value&&(this.show=!0)},computed:{currentTransition:function(){return this.transition?this.transition:"top"===this.position?"vux-slide-from-top":"bottom"===this.position?"vux-slide-from-bottom":"vux-fade"},toastClass:function(){return{"weui-toast_forbidden":"warn"===this.type,"weui-toast_cancel":"cancel"===this.type,"weui-toast_success":"success"===this.type,"weui-toast_text":"text"===this.type,"vux-toast-top":"top"===this.position,"vux-toast-bottom":"bottom"===this.position,"vux-toast-middle":"middle"===this.position}},style:function(){if("text"===this.type&&"auto"===this.width)return{padding:"10px"}}},watch:{show:function(t){var e=this;t&&(this.$emit("input",!0),this.$emit("on-show"),this.fixSafariOverflowScrolling("auto"),clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.show=!1,e.$emit("input",!1),e.$emit("on-hide"),e.fixSafariOverflowScrolling("touch")},this.time))},value:function(t){this.show=t}}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vux-toast"},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.isShowMask&&this.show,expression:"isShowMask && show"}],staticClass:"weui-mask_transparent"}),this._v(" "),e("transition",{attrs:{name:this.currentTransition}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"show"}],staticClass:"weui-toast",class:this.toastClass,style:{width:this.width}},[e("i",{directives:[{name:"show",rawName:"v-show",value:"text"!==this.type,expression:"type !== 'text'"}],staticClass:"weui-icon-success-no-circle weui-icon_toast"}),this._v(" "),this.text?e("p",{staticClass:"weui-toast__content",style:this.style,domProps:{innerHTML:this._s(this.text)}}):e("p",{staticClass:"weui-toast__content",style:this.style},[this._t("default")],2)])])],1)},staticRenderFns:[]},o=n("VU/8")(a,i,!1,function(t){n("ERQ/")},null,null);e.a=o.exports}},["NHnr"]);
//# sourceMappingURL=app.28a8ac7d26478a73187d.js.map